(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function c(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(e){if(e.ep)return;e.ep=!0;const n=c(e);fetch(e.href,n)}})();function b(t,r){const c=(1<<r-1)-1;return Math.round(t*c)/c}function x(t,r){return Float32Array.from(t,c=>b(c,r))}function H(t,r,c){if(r<c)throw new Error("inputRate should be larger than outputRate");const l=r/c,e=new Float32Array(Math.floor(t.length/l));for(let n=0;n<e.length;n++)e[n]=t[Math.floor(n*l)];return e}function R(t,r,c){const l=new ArrayBuffer(44+t.length*2),e=new DataView(l);function n(a,i){for(let s=0;s<i.length;s++)e.setUint8(a+s,i.charCodeAt(s))}n(0,"RIFF"),e.setUint32(4,36+t.length*2,!0),n(8,"WAVE"),n(12,"fmt "),e.setUint32(16,16,!0),e.setUint16(20,1,!0),e.setUint16(22,c,!0),e.setUint32(24,r,!0),e.setUint32(28,r*c*2,!0),e.setUint16(32,c*2,!0),e.setUint16(34,16,!0),n(36,"data"),e.setUint32(40,t.length*2,!0);let o=44;for(let a=0;a<t.length;a++){const i=Math.max(-1,Math.min(1,t[a]));e.setInt16(o,i<0?i*32768:i*32767,!0),o+=2}return new Blob([l],{type:"audio/wav"})}function D(t,r,c){const l=new Float32Array(t.length),e=2*Math.PI*c,n=e/(e+r);l[0]=t[0];for(let o=1;o<t.length;o++)l[o]=n*t[o]+(1-n)*l[o-1];return l}function C(t,r){const c=Math.pow(2,r/12),l=Math.floor(t.length/c),e=new Float32Array(l);for(let n=0;n<l;n++){const o=n*c,a=Math.floor(o),i=Math.min(t.length-1,Math.ceil(o)),s=o-a;e[n]=(1-s)*t[a]+s*t[i]}return e}function z(t){if(t.numberOfChannels<2)return t;const r=t.length,c=t.sampleRate,l=t.getChannelData(0),e=t.getChannelData(1),n=new Float32Array(r);for(let a=0;a<r;a++)n[a]=(l[a]+e[a])/2;const o=new AudioContext().createBuffer(1,r,c);return o.copyToChannel(n,0),o}function B(t,r,c){if(r>c)throw new Error("inputRate should be smaller than outputRate");const l=c/r,e=new Float32Array(Math.floor(t.length*l));for(let n=0;n<e.length;n++){const o=n/l,a=Math.floor(o),i=Math.min(t.length-1,Math.ceil(o)),s=o-a;e[n]=(1-s)*t[a]+s*t[i]}return e}const d={"48kHz":48e3,"44.1kHz":44100,"24kHz":24e3,"12kHz":12e3},I=[{targetSampleRate:d["24kHz"],targetBitDepth:12,octave:0},{targetSampleRate:d["24kHz"],targetBitDepth:12,octave:1},{targetSampleRate:d["24kHz"],targetBitDepth:12,octave:2},{targetSampleRate:d["24kHz"],targetBitDepth:8,octave:0},{targetSampleRate:d["24kHz"],targetBitDepth:8,octave:1},{targetSampleRate:d["24kHz"],targetBitDepth:8,octave:2},{targetSampleRate:d["12kHz"],targetBitDepth:12,octave:0},{targetSampleRate:d["12kHz"],targetBitDepth:12,octave:1},{targetSampleRate:d["12kHz"],targetBitDepth:12,octave:2},{targetSampleRate:d["12kHz"],targetBitDepth:8,octave:0},{targetSampleRate:d["12kHz"],targetBitDepth:8,octave:1},{targetSampleRate:d["12kHz"],targetBitDepth:8,octave:2}];function $(t,r=d["24kHz"],c=12,l=1){t=z(t);const e=t.sampleRate,n=t.numberOfChannels,o=new Float32Array(t.length*n);for(let i=0;i<t.length;i++)for(let s=0;s<n;s++)o[i*n+s]=t.getChannelData(s)[i];let a=B(o,e,d["48kHz"]);return a=C(a,12*l),a=H(a,d["48kHz"],r),a=x(a,c),a=D(a,r,r*2/3),a=C(a,-12*l),a=B(a,r,d["44.1kHz"]),[a,d["44.1kHz"],n]}function S(t,r,c,l){return`${t.replace(/\.[^/.]+$/,"")}_${r}Hz_${c}bit_${l>0?l:"un"}pre-pitched.wav`}function L(t,r,c){var E;const{targetSampleRate:l,targetBitDepth:e,octave:n}=c,[o,a,i]=$(r,l,e,n),s=R(o,a,i),m=URL.createObjectURL(s),h=`${l}_${e}_${n}`;let u=document.getElementById(`section_${h}`);u||(u=document.createElement("div"),u.id=`section_${h}`,(E=document.getElementById("audio-container"))==null||E.appendChild(u));let g=document.getElementById(`title_${h}`);g||(g=document.createElement("p"),g.id=`title_${h}`,u.appendChild(g)),g.innerHTML=`${l}Hz / ${e}bit${n>0?`<br/><span class="small-text">${n} octave${n>1?"s":""} pre-pitched<span>`:""}`;let p=document.getElementById(`audio_${h}`);p||(p=document.createElement("audio"),p.id=`audio_${h}`,p.controls=!0,u.appendChild(p)),p.src=m;let f=document.getElementById(`button_${h}`);f&&u.removeChild(f),f=document.createElement("button"),f.id=`button_${h}`,f.innerText="download",f.addEventListener("click",()=>{const v=document.createElement("a");v.href=m,v.download=S(t,l,e,n),v.click()}),u.appendChild(f)}let y;async function k(t){const r=t.target.files[0];if(!r)return;const c=document.getElementById("input-container"),l=c.querySelector(".drag-text");l.textContent=`‚úÖ ${r.name} selected`,l.style.color="var(--mpc-red)";const e=document.getElementById("original-audio");e&&c.removeChild(e);const n=document.getElementById("audio-container");n.innerHTML="";let o;try{const i=await r.arrayBuffer();y&&y.close(),y=new window.AudioContext({sampleRate:d["44.1kHz"]}),o=await y.decodeAudioData(i)}catch{w();return}let a;try{const i=new OfflineAudioContext(o.numberOfChannels,o.length,o.sampleRate),s=i.createBufferSource();s.buffer=o;const m=i.createGain();m.gain.value=1,s.connect(m).connect(i.destination),s.start(),a=await i.startRendering()}catch{w("‚ùå Something went wrong. Please try again");return}{const{numberOfChannels:i,sampleRate:s}=a,m=new Float32Array(a.length*i);for(let p=0;p<a.length;p++)for(let f=0;f<i;f++)m[p*i+f]=a.getChannelData(f)[p];const h=R(m,s,i),u=URL.createObjectURL(h);let g=document.getElementById("original-audio");g||(g=document.createElement("audio"),g.id="original-audio",g.controls=!0,c.appendChild(g)),g.src=u}I.forEach(i=>L(r.name,a,i))}function w(t){const c=document.getElementById("input-container").querySelector(".drag-text");c.textContent=t??"‚ùå Please select an audio file",c.style.color="var(--text-error)",setTimeout(()=>{c.textContent="üìÅ Select an audio file or drag & drop here",c.style.color="var(--text-secondary)"},3e3)}function M(){const t=document.getElementById("input-container"),r=document.getElementById("fileInput");["dragenter","dragover","dragleave","drop"].forEach(o=>{t.addEventListener(o,c,!1),document.body.addEventListener(o,c,!1)}),["dragenter","dragover"].forEach(o=>{t.addEventListener(o,l,!1)}),["dragleave","drop"].forEach(o=>{t.addEventListener(o,e,!1)}),t.addEventListener("drop",n,!1);function c(o){o.preventDefault(),o.stopPropagation()}function l(){t.classList.add("drag-over")}function e(){t.classList.remove("drag-over")}function n(o){const a=o.dataTransfer;if(!a)return;const i=a.files;if(i.length>0){const s=i[0];if(s.type.startsWith("audio/")){const m=new DataTransfer;m.items.add(s),r.files=m.files;const h=new Event("change",{bubbles:!0});r.dispatchEvent(h);const u=t.querySelector(".drag-text");u.textContent=`‚úÖ ${s.name} selected`,u.style.color="var(--mpc-red)"}else w()}}r.addEventListener("change",k)}M();
